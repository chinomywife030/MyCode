# 🎯 互動式教學框實作指南

## 📅 完成日期
2025-12-16

---

## 🎯 設計目標

首次訪問時顯示**互動式教學框**，直接指向「身分切換按鈕」，教使用者如何切換身分。

---

## ✅ 實作內容

### 新增檔案
1. **`bangbuy/components/InteractiveOnboarding.tsx`** - 互動式教學框

### 修改檔案
1. **`bangbuy/app/page.tsx`** - 整合互動式教學

---

## 🎨 視覺設計

### 整體效果

```
┌─────────────────────────────────────┐
│                                     │
│  ┌──────────────────────────┐      │
│  │ 🛒 買家  ✈️ 代購 ←高亮框  │      │
│  └──────────────────────────┘      │
│            ↓ 箭頭                   │
│     ┌──────────────────┐           │
│     │  🛒                │           │
│     │  你目前是【買家】   │           │
│     │  點擊上方按鈕可以   │           │
│     │  切換成【代購】...  │           │
│     │  [我知道了]        │           │
│     └──────────────────┘           │
│                                     │
│  (其他頁面內容半透明模糊)            │
│                                     │
└─────────────────────────────────────┘
```

---

## 🎨 樣式規格

### 1. 背景遮罩

```tsx
backgroundColor: 'rgba(0, 0, 0, 0.5)'  // 50% 黑色
backdropFilter: 'blur(3px)'           // 輕微模糊
```

**效果**：
- 頁面內容半透明
- 輕微模糊
- 聚焦教學區域

---

### 2. 高亮框（指向身分切換按鈕）

```tsx
position: absolute
top: 12px
left: 50%
transform: translateX(-50%)
width: 200px
height: 48px
border: 3px solid white           // 白色邊框
borderRadius: 20px
boxShadow: 0 0 0 9999px rgba(0, 0, 0, 0.5)  // 遮罩效果
animation: pulse 2s infinite      // 脈動動畫
```

**效果**：
- 白色邊框高亮
- 脈動動畫吸引注意
- 其他區域變暗

---

### 3. 教學提示框

#### 買家模式（藍色）
```tsx
backgroundColor: 'rgba(59, 130, 246, 0.75)'  // 藍色 75%
borderColor: 'rgba(96, 165, 250, 0.3)'
borderRadius: '12px'
backdropFilter: 'blur(12px)'
boxShadow: '0 8px 32px rgba(0, 0, 0, 0.2)'
```

#### 代購模式（橘色）
```tsx
backgroundColor: 'rgba(249, 115, 22, 0.75)'  // 橘色 75%
borderColor: 'rgba(251, 146, 60, 0.3)'
```

**位置**：
```tsx
top: 72px                    // 在高亮框下方
left: 50%
transform: translateX(-50%)  // 置中
maxWidth: 320px
width: calc(100vw - 32px)    // 手機留白
```

---

### 4. 箭頭指示

```tsx
// 三角形箭頭指向上方
position: absolute
top: -8px
left: 50%
transform: translateX(-50%)
borderLeft: 8px solid transparent
borderRight: 8px solid transparent
borderBottom: 8px solid [tooltipColor]
```

**效果**：
- 清楚指向高亮框
- 視覺連結

---

## 📝 教學內容

### 買家模式

```
Icon: 🛒
標題: 你目前是【買家】
說明: 點擊上方按鈕可以切換成【代購】，發布行程賺取收入
按鈕: 我知道了
```

### 代購模式

```
Icon: ✈️
標題: 你目前是【代購】
說明: 點擊上方按鈕可以切換成【買家】，發布需求購買商品
按鈕: 我知道了
```

---

## 🎬 動畫效果

### 1. 背景遮罩淡入

```css
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
```

**時長**：0.3s

---

### 2. 提示框滑下

```css
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translate(-50%, -10px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}
```

**時長**：0.4s

---

### 3. 高亮框脈動

```css
@keyframes pulse {
  0%, 100% {
    opacity: 1;
    transform: translateX(-50%) scale(1);
  }
  50% {
    opacity: 0.8;
    transform: translateX(-50%) scale(1.05);
  }
}
```

**時長**：2s（無限循環）

**效果**：
- 吸引使用者注意
- 明確指向目標

---

## 🔧 技術實作

### localStorage 管理

```tsx
const ONBOARDING_KEY = 'bangbuy_interactive_onboarding_completed';

// 檢查是否已完成
const completed = localStorage.getItem(ONBOARDING_KEY);

// 標記為已完成
localStorage.setItem(ONBOARDING_KEY, 'true');
```

---

### 顯示邏輯

```tsx
useEffect(() => {
  const completed = localStorage.getItem(ONBOARDING_KEY);
  if (!completed) {
    // 延遲 800ms 顯示，確保頁面元素已渲染
    const timer = setTimeout(() => {
      setShow(true);
    }, 800);
    return () => clearTimeout(timer);
  }
}, []);
```

**延遲原因**：
- 確保 Navbar 已渲染
- 確保身分切換按鈕已顯示
- 避免閃爍

---

### 關閉方式

#### 方式 1：點擊背景遮罩
```tsx
<div onClick={handleClose}>
  {/* 遮罩 */}
</div>
```

#### 方式 2：點擊「我知道了」按鈕
```tsx
<button onClick={handleClose}>
  我知道了
</button>
```

#### 方式 3：點擊右上角 ✕
```tsx
<button onClick={handleClose}>
  ✕
</button>
```

---

### 高亮效果實作

```tsx
// 使用 box-shadow 製造遮罩效果
boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.5)'

// 讓高亮框不阻擋點擊
pointerEvents: 'none'
```

**原理**：
- `box-shadow` 向外擴展 9999px
- 覆蓋整個畫面
- 形成「挖空」效果

---

## 📱 響應式設計

### 桌面版

```
┌─────────────────────────────────────┐
│         Navbar                      │
│  ┌──────────────────┐ ← 高亮框      │
│  │ 🛒 買家 ✈️ 代購   │               │
│  └──────────────────┘               │
│         ↓                           │
│  ┌────────────────────┐             │
│  │  🛒                 │             │
│  │  你目前是【買家】    │             │
│  │  點擊上方按鈕...     │             │
│  │  [我知道了]         │             │
│  └────────────────────┘             │
│                                     │
└─────────────────────────────────────┘
```

### 手機版

```
┌──────────────────┐
│  Navbar          │
│ ┌──────────────┐ │ ← 高亮框
│ │🛒買家 ✈️代購 │ │
│ └──────────────┘ │
│       ↓          │
│ ┌──────────────┐ │
│ │  🛒          │ │
│ │ 你目前是      │ │
│ │ 【買家】      │ │
│ │ 點擊上方...   │ │
│ │ [我知道了]    │ │
│ └──────────────┘ │
│                  │
└──────────────────┘
```

**自動調整**：
- `width: calc(100vw - 32px)` - 手機留白
- `maxWidth: 320px` - 桌面最大寬度
- 高亮框位置固定在 Navbar

---

## 🎯 使用者體驗流程

```
1. 使用者首次打開 BangBuy
   ↓
2. 頁面載入完成
   ↓
3. 延遲 800ms（確保 Navbar 已渲染）
   ↓
4. 顯示半透明背景遮罩
   ↓
5. 高亮顯示「身分切換按鈕」
   - 白色邊框
   - 脈動動畫
   ↓
6. 在按鈕下方顯示教學提示框
   - 箭頭指向按鈕
   - 說明如何切換身分
   ↓
7. 使用者閱讀說明
   ↓
8. 點擊「我知道了」或背景
   ↓
9. 教學關閉
   ↓
10. 標記為已完成（localStorage）
   ↓
11. 開始正常使用網站
```

---

## 🧪 測試指南

### 測試互動式教學

#### 1. 清除 localStorage
```javascript
localStorage.removeItem('bangbuy_interactive_onboarding_completed');
location.reload();
```

#### 2. 驗證顯示
```
✅ 延遲 800ms 後顯示
✅ 背景半透明遮罩
✅ 身分切換按鈕高亮（白色邊框）
✅ 高亮框脈動動畫
✅ 提示框在按鈕下方
✅ 箭頭指向按鈕
✅ 顏色依模式切換（藍/橘）
```

#### 3. 測試關閉方式
```
方式 1：點擊背景遮罩
  ✅ 教學關閉
  ✅ localStorage 已標記

方式 2：點擊「我知道了」
  ✅ 教學關閉
  ✅ localStorage 已標記

方式 3：點擊右上角 ✕
  ✅ 教學關閉
  ✅ localStorage 已標記
```

#### 4. 測試持久化
```
1. 完成教學
2. 刷新頁面
   ✅ 教學不再顯示
3. 關閉瀏覽器再開啟
   ✅ 教學仍不顯示
```

---

### 測試模式切換

#### 1. 買家模式
```
1. 確保當前是買家模式
2. 清除 localStorage
3. 刷新頁面
   ✅ 顯示藍色提示框
   ✅ 標題：「你目前是【買家】」
   ✅ 說明：「切換成【代購】」
```

#### 2. 代購模式
```
1. 切換到代購模式
2. 清除 localStorage
3. 刷新頁面
   ✅ 顯示橘色提示框
   ✅ 標題：「你目前是【代購】」
   ✅ 說明：「切換成【買家】」
```

---

## 🎨 顏色系統

### 買家模式（藍色系）

| 元素 | 顏色 | 透明度 |
|-----|------|--------|
| 提示框背景 | `rgb(59, 130, 246)` | 75% |
| 提示框邊框 | `rgb(96, 165, 250)` | 30% |
| 文字 | `white` | 100% |
| 按鈕背景 | `white` | 100% |
| 按鈕文字 | `#2563eb` | 100% |

### 代購模式（橘色系）

| 元素 | 顏色 | 透明度 |
|-----|------|--------|
| 提示框背景 | `rgb(249, 115, 22)` | 75% |
| 提示框邊框 | `rgb(251, 146, 60)` | 30% |
| 文字 | `white` | 100% |
| 按鈕背景 | `white` | 100% |
| 按鈕文字 | `#ea580c` | 100% |

### 通用

| 元素 | 顏色 | 透明度 |
|-----|------|--------|
| 背景遮罩 | `rgb(0, 0, 0)` | 50% |
| 高亮框邊框 | `white` | 100% |
| 高亮框遮罩 | `rgb(0, 0, 0)` | 50% |

---

## 🎯 設計優勢

### 1. 直接指向目標
- ✅ 高亮顯示身分切換按鈕
- ✅ 箭頭明確指向
- ✅ 脈動動畫吸引注意

### 2. 簡單明瞭
- ✅ 只教一件事：如何切換身分
- ✅ 文案簡短易懂
- ✅ 一眼就能理解

### 3. 低干擾
- ✅ 半透明設計
- ✅ 可隨時關閉
- ✅ 只顯示一次

### 4. 視覺一致
- ✅ 顏色依模式切換
- ✅ 與整體設計協調
- ✅ 現代感強

---

## 📊 與之前版本對比

### 之前：4 步驟教學流程
```
優點：
- 內容完整
- 涵蓋多個功能

缺點：
- 步驟太多
- 使用者可能跳過
- 不夠聚焦
```

### 現在：互動式教學框
```
優點：
- 直接指向目標
- 聚焦單一功能
- 視覺衝擊力強
- 互動性高

特色：
- 高亮顯示按鈕
- 脈動動畫
- 箭頭指示
- 一看就懂
```

---

## 🔮 未來優化方向

### 1. 多步驟引導
```tsx
// 步驟 1：指向身分切換按鈕
// 步驟 2：指向發布需求按鈕
// 步驟 3：指向通知鈴鐺
```

### 2. 實際互動
```tsx
// 要求使用者實際點擊切換按鈕
// 完成後才進入下一步
```

### 3. 進度追蹤
```tsx
// 顯示「1/3」進度
// 可跳過或繼續
```

---

## ✅ 驗收標準

- [x] 首次訪問顯示教學
- [x] 完成後不再顯示
- [x] 高亮顯示身分切換按鈕
- [x] 脈動動畫
- [x] 箭頭指向按鈕
- [x] 提示框在按鈕下方
- [x] 依模式切換顏色
- [x] 半透明浮層樣式
- [x] 毛玻璃效果
- [x] 可隨時關閉
- [x] 點擊背景關閉
- [x] 響應式設計
- [x] 無 linter 錯誤

---

## 📁 檔案清單

### 新增檔案
1. `bangbuy/components/InteractiveOnboarding.tsx` - 互動式教學框
2. `bangbuy/INTERACTIVE_ONBOARDING_GUIDE.md` - 本文件

### 修改檔案
1. `bangbuy/app/page.tsx` - 整合互動式教學

---

**完成者**：AI Assistant  
**完成日期**：2025-12-16  
**版本**：v4.0 (Interactive Onboarding)








